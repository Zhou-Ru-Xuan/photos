<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1047" height="223" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36&quot; version=&quot;7.9.5&quot; editor=&quot;www.draw.io&quot;&gt;&lt;diagram id=&quot;a9faf915-57ec-e1da-ea5a-2918f626af15&quot; name=&quot;第 1 页&quot;&gt;7Vtbk6I4FP4t+5DHnQISBB7BxpmH2aqt6q3a2UcaIrKDxILY6vz6TSCRS9BmlUHH0ofucHL/zvnOCccI4Hy9/5wHm9UfJMIpMLRoD+ALMAwdQY3945JDJbGRXQniPIlEo1rwmvzAQij6xdskwkWrISUkpcmmLQxJluGQtmRBnpNdu9mSpO1ZN0GMFcFrGKSq9O8koiuxC8Oq5V9wEq/kzPrMqWregvB7nJNtJuYDBlyWn6p6HcixxEaLVRCRXUMEfQDnOSG0Kq33c5xybCVsVb/FidrjunOc0SEdEERVl/cg3WK55nJl9CDRKPeDeQ8dQG+3Sih+3QQhr90x/TPZiq5TUV3QnHzHc5KSvOwN5+XnWCPx5G2XSZrKlhnJMBeRjDY6a+WHyYM0iTMmC9nGMKv0oqBYHdekblsg8Y5zivcNkYDhMyZrTPMDayJqTVt0ESZrSBve1QagS7WtGso3NCEMhNHFx7Fr4FlBYN+vB2jZih5c4FvAc4G34AXXBrYHfBt4GrAhlziICdk8iyTHis7YrmlbMTkukh/BW9mAI7ohSUbLJZseMF84xltKioqLegPyFC/5UBzKhFHEFWJKuOYLZghJFv/FH15+R2c0OIKOJEhSRVaPivReFY2hIUcBGUfMa4hHktMViUkWpH4t9WrqaG1t4H1CvzXK//Amn0z+lLGVfRM9yoe6rqBBTl3u4GrGlLJFwhcuukSyRZgGRZGElVA04RP+iyk9CK/Llc5E9fK/klKX+hlVnub4SSUXZJuHAjZoC32wlceYSiGshBzUs8aQ4zSgyXvbVV+lWrmeBvmSJR/0EyPNNqW/cbS3ZR9gzII1N/zqr/qYcq5EyTsrxrz4poxRNWGLarQ643O1a3zuCKQzUMcxmirrHKSSbjYG6aRTPolMA4WhVn2t9Uov1LZebWzrFV3/5G661oY+M9vasDswV0sVvZqRvzMQcjoDSf8mB6q2pwxUquy4n4FaVM8UT9d5oeuEfcZnTWN8yPrA+E7YDAM1ODSaiaPHtVYFFa/NMZVO+45dKjQ7B5lJXepsGjI+CuGsPsI5tzurWIrV8+He7t/qkWXd0OrtZwgaixGjG39/tLHkq9z/jDYXxRJHYVXIpuG0j4ExZxPPPzqJfkCtZq6DYe44razIT6KcKfl0C8o5moLYk3KDldyKN44+DeVsrWMvA98uLqGc3FMz8yizWjnwTeAYwJ4XPOXl+sDVyySYDxzrjkOcbcxuyDdDAbTMYnBH5s8Ai4CMkQxX2wXO4o5BVPz+hCAiXQ0E3jMPez4PC2cT5mGR8QwrI53kUF+sQQYaO9YMV60aEp552FN5WIgmdIuGmsG7dR726Krb1jvRSambh4XWSHlYKL9KHv8tBxlwGtf5KO4R9RmYPY2BdXOtioFNmWs9QvHr51qndZvqy8qTcGcI1/PN2vEu0S3OI+qljF801zqt1T9vSozFiPGNf1iudWi0uSSWyD09eK51UspBFbEn5S7KtSJoTEO5bq516BvERZRTU4MPl2udlm/q3YOHyLVOC6LZY5UMswVwXY6iMwe2A3wEPBvYmii4Pddih6E+Yir2eAv5DpKxptXmAdKgokId/qxsLBpwf7zh9EVYaOigdY+7bevHGHLu3jhDc7EQhOigbPnuzD+L8oc+voGh2QOhlF0ZCozOtSodDooEalJK694O7I508TGOPda/Sqia1z/9gP5/&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(3,3)"><rect x="556" y="17" width="120" height="200" rx="18" ry="18" fill="none" stroke="#cccccc" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(54.5,59.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="90" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">A线程调用tryFire</div></div></foreignObject></g><path d="M 310 67 L 326.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 331.88 67 L 324.88 70.5 L 326.63 67 L 324.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="216" y="37" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(217.5,46.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="90" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 90px; white-space: normal; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">if a.result!=null &amp;&amp;<div>b.result!=null</div></div></div></foreignObject></g><path d="M 163 67 L 209.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 214.88 67 L 207.88 70.5 L 209.63 67 L 207.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 427 67 L 445.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 450.88 67 L 443.88 70.5 L 445.63 67 L 443.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="333" y="37" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(354.5,60.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="50" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 52px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">r=a.result</div></div></foreignObject></g><path d="M 546 67 L 566 67 L 549 67 L 562.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 567.88 67 L 560.88 70.5 L 562.63 67 L 560.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="452" y="37" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(472.5,60.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="52" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 54px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">s=b.result</div></div></foreignObject></g><path d="M 663 67 L 678.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 683.88 67 L 676.88 70.5 L 678.63 67 L 676.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="569" y="37" width="94" height="60" fill="#99cccc" stroke="#cccccc" pointer-events="none"/><g transform="translate(586.5,60.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="58" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 60px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">cas tag,0,1</div></div></foreignObject></g><path d="M 779 67 L 794.63 67" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 799.88 67 L 792.88 70.5 L 794.63 67 L 792.88 63.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="801" y="37" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(818.5,60.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="58" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 59px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">用r和s计算</div></div></foreignObject></g><rect x="685" y="37" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(705.5,60.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="52" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 54px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">if cas成功</div></div></foreignObject></g><g transform="translate(54.5,149.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="90" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">B线程调用tryFire</div></div></foreignObject></g><path d="M 310 157 L 326.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 331.88 157 L 324.88 160.5 L 326.63 157 L 324.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="216" y="127" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(217.5,136.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="90" height="40"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 90px; white-space: normal; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">if a.result!=null &amp;&amp;<div>b.result!=null</div></div></div></foreignObject></g><path d="M 163 157 L 209.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 214.88 157 L 207.88 160.5 L 209.63 157 L 207.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 427 157 L 447 157 L 432 157 L 445.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 450.88 157 L 443.88 160.5 L 445.63 157 L 443.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="333" y="127" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(354.5,150.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="50" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 52px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">r=a.result</div></div></foreignObject></g><path d="M 546 157 L 566 157 L 549 157 L 562.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 567.88 157 L 560.88 160.5 L 562.63 157 L 560.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="452" y="127" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(472.5,150.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="52" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 54px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">s=b.result</div></div></foreignObject></g><path d="M 663 157 L 678.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 683.88 157 L 676.88 160.5 L 678.63 157 L 676.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="569" y="127" width="94" height="60" fill="#99cccc" stroke="#cccccc" pointer-events="none"/><g transform="translate(586.5,150.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="58" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 60px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">cas tag,0,1</div></div></foreignObject></g><path d="M 779 157 L 794.63 157" fill="none" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><path d="M 799.88 157 L 792.88 160.5 L 794.63 157 L 792.88 153.5 Z" fill="#cccccc" stroke="#cccccc" stroke-miterlimit="10" pointer-events="none"/><rect x="801" y="127" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(818.5,150.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="58" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 59px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">用r和s计算</div></div></foreignObject></g><rect x="685" y="127" width="94" height="60" fill="#ffffff" stroke="#cccccc" pointer-events="none"/><g transform="translate(705.5,150.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="52" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 54px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">if cas成功</div></div></foreignObject></g><g transform="translate(558.5,192.5)"><foreignObject style="overflow:visible;" pointer-events="all" width="115" height="12"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">只有一个线程cas成功</div></div></foreignObject></g></g></svg>